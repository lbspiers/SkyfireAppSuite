# Database Schema Documentation

This directory contains automatically generated SQL schema definitions for all tables in the Skyfire database.

## Purpose

These schema files serve as:
- **Reference documentation** for Claude Code and developers
- **Version-controlled snapshots** of database structure
- **Change tracking** through git history
- **Quick lookup** for table structures without database access

## Files

- **`_index.md`** - Master index listing all tables with metadata
- **`_table_list.txt`** - Simple text list of all table names (for diffing)
- **`{table_name}.sql`** - Schema definition for each table

## Auto-Generated

**Do NOT edit these files manually.**

These files are automatically generated by [../scripts/dump-schemas.sh](../scripts/dump-schemas.sh) and should only be updated by running that script on the backend server.

## Usage for Claude Code

When working with the database, Claude Code can reference these schema files to:
- Understand table structures
- See column types and constraints
- Check foreign key relationships
- Review indexes and sequences

## Keeping Up-to-Date

These schemas are synced from the backend database. After making database changes:

1. SSH to backend server
2. Run: `npm run schema:sync`
3. Commit and push the updated schemas
4. Pull to local workspace

See [../scripts/README.md](../scripts/README.md) for detailed instructions.

## Status Indicators

In `_index.md`, you'll see status indicators:
- `✓` - Current (table exists in database)
- `+` - New (recently added to database)
- `⚠` - Orphaned (schema exists but table was deleted)

## Example

```sql
-- From company.sql
CREATE TABLE company (
    company_id integer NOT NULL,
    company_name character varying(255) NOT NULL,
    address text,
    city character varying(100),
    state character varying(50),
    zip_code character varying(20),
    phone_number character varying(20),
    email character varying(255),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);
```

## Notes

- Schemas include full table definitions (columns, constraints, indexes, sequences)
- Only structure is dumped, not data
- Each file includes timestamp of when it was generated
- Files are formatted for readability and version control

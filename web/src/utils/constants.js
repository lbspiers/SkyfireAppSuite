// Equipment constants ported from mobile app
// String Combiner Panel Models by Make

export const STRING_COMBINER_MODELS = {
  "Cutler-Hammer": [
    { label: "100 Amp", value: "100 Amp" },
    { label: "125 Amps", value: "125 Amps" },
    { label: "150 Amps", value: "150 Amps" },
    { label: "175 Amps", value: "175 Amps" },
    { label: "200 Amps", value: "200 Amps" },
    { label: "60 Amp", value: "60 Amp" },
  ],
  "Eaton": [
    { label: "100 Amp", value: "100 Amp" },
    { label: "125 Amps", value: "125 Amps" },
    { label: "150 Amps", value: "150 Amps" },
    { label: "175 Amps", value: "175 Amps" },
    { label: "200 Amps", value: "200 Amps" },
    { label: "60 Amp", value: "60 Amp" },
  ],
  "Enphase": [
    { label: "AC COMBINER BOX XAM1-120", value: "AC COMBINER BOX XAM1-120" },
    { label: "AC COMBINER BOX XAM1-120-B", value: "AC COMBINER BOX XAM1-120-B" },
    { label: "IQ COMBINER 3C X-IQ-AM1-240-3C", value: "IQ COMBINER 3C X-IQ-AM1-240-3C" },
    { label: "IQ COMBINER 3C-ES X-IQ-AM1-240-3C", value: "IQ COMBINER 3C-ES X-IQ-AM1-240-3C" },
    { label: "IQ COMBINER 3-ES X-IQ-AM1-240-3", value: "IQ COMBINER 3-ES X-IQ-AM1-240-3" },
    { label: "IQ COMBINER 4 X-IQAM1-240-4", value: "IQ COMBINER 4 X-IQAM1-240-4" },
    { label: "IQ COMBINER 4C-ES X-IQ-AM1-240-4C", value: "IQ COMBINER 4C-ES X-IQ-AM1-240-4C" },
    { label: "IQ COMBINER 4-ES X-IQ-AM1-240-4", value: "IQ COMBINER 4-ES X-IQ-AM1-240-4" },
    { label: "IQ Combiner 5C X-A-M1-240-5C", value: "IQ Combiner 5C X-A-M1-240-5C" },
    { label: "IQ COMBINER 6C X-IQ-AM1-240-6C", value: "IQ COMBINER 6C X-IQ-AM1-240-6C" },
    { label: "IQ COMBINER X-IQ-AM1-240-3", value: "IQ COMBINER X-IQ-AM1-240-3" },
    { label: "IQ COMBINER X-IQ-AM1-240-3C", value: "IQ COMBINER X-IQ-AM1-240-3C" },
    { label: "IQ COMBINER X-IQ-AM1-240-4", value: "IQ COMBINER X-IQ-AM1-240-4" },
    { label: "IQ COMBINER X-IQ-AM1-240-4C", value: "IQ COMBINER X-IQ-AM1-240-4C" },
    { label: "X2-IQ-AM1-240-4C", value: "X2-IQ-AM1-240-4C" },
    { label: "X-IQ-AM1-240-2", value: "X-IQ-AM1-240-2" },
  ],
  "Siemens": [
    { label: "100 Amp", value: "100 Amp" },
    { label: "125 Amps", value: "125 Amps" },
    { label: "150 Amps", value: "150 Amps" },
    { label: "175 Amps", value: "175 Amps" },
    { label: "200 Amps", value: "200 Amps" },
    { label: "60 Amp", value: "60 Amp" },
  ],
  "Square D": [
    { label: "100 Amp", value: "100 Amp" },
    { label: "125 Amps", value: "125 Amps" },
    { label: "150 Amps", value: "150 Amps" },
    { label: "175 Amps", value: "175 Amps" },
    { label: "200 Amps", value: "200 Amps" },
    { label: "60 Amp", value: "60 Amp" },
  ],
};

export const MAIN_CIRCUIT_BREAKER_RATINGS = [
  { value: "MLO", label: "MLO" },
  { value: "100", label: "100 Amps" },
  { value: "110", label: "110 Amps" },
  { value: "125", label: "125 Amps" },
  { value: "150", label: "150 Amps" },
  { value: "175", label: "175 Amps" },
  { value: "200", label: "200 Amps" },
  { value: "225", label: "225 Amps" },
  { value: "250", label: "250 Amps" },
  { value: "300", label: "300 Amps" },
  { value: "350", label: "350 Amps" },
  { value: "400", label: "400 Amps" },
  { value: "450", label: "450 Amps" },
  { value: "500", label: "500 Amps" },
  { value: "600", label: "600 Amps" },
];

export const BUS_BAR_RATING = [
  { value: "60", label: "60 Amps" },
  { value: "70", label: "70 Amps" },
  { value: "80", label: "80 Amps" },
  { value: "90", label: "90 Amps" },
  { value: "100", label: "100 Amps" },
  { value: "110", label: "110 Amps" },
  { value: "125", label: "125 Amps" },
  { value: "150", label: "150 Amps" },
  { value: "175", label: "175 Amps" },
  { value: "200", label: "200 Amps" },
  { value: "225", label: "225 Amps" },
  { value: "250", label: "250 Amps" },
  { value: "300", label: "300 Amps" },
  { value: "350", label: "350 Amps" },
  { value: "400", label: "400 Amps" },
  { value: "450", label: "450 Amps" },
  { value: "500", label: "500 Amps" },
  { value: "600", label: "600 Amps" },
];

export const BREAKER_RATING_OPTIONS = [
  { label: "MLO", value: "MLO" },
  { label: "20", value: "20" },
  { label: "30", value: "30" },
  { label: "40", value: "40" },
  { label: "50", value: "50" },
  { label: "60", value: "60" },
  { label: "80", value: "80" },
  { label: "100", value: "100" },
  { label: "110", value: "110" },
  { label: "125", value: "125" },
  { label: "150", value: "150" },
  { label: "175", value: "175" },
  { label: "200", value: "200" },
  { label: "225", value: "225" },
  { label: "250", value: "250" },
  { label: "300", value: "300" },
  { label: "350", value: "350" },
  { label: "400", value: "400" },
  { label: "450", value: "450" },
  { label: "500", value: "500" },
  { label: "600", value: "600" },
];

export const SMS_MAIN_BREAKER_OPTIONS = [
  { label: "MLO", value: "MLO" },
  { label: "100", value: "100" },
  { label: "125", value: "125" },
  { label: "150", value: "150" },
  { label: "175", value: "175" },
  { label: "200", value: "200" },
];

// Electrical Section Constants

export const SERVICE_TYPE_OPTIONS = [
  { label: "Meter & Main Panel All-in-One", value: "Meter & Main Panel All-in-One" },
  { label: "Meter & Main Panel Detached", value: "Meter & Main Panel Detached" },
  { label: "Hot Bus Panel", value: "Hot Bus Panel" },
  { label: "Pedestal", value: "Pedestal" },
  { label: "Solar Ready", value: "Solar Ready" },
];

export const FEEDER_LOCATIONS = [
  { label: "Top", value: "Top" },
  { label: "Center", value: "Center" },
  { label: "Bottom", value: "Bottom" },
];

export const CONDUCTOR_SIZING_OPTIONS = [
  { label: "14", value: "14" },
  { label: "12", value: "12" },
  { label: "10", value: "10" },
  { label: "8", value: "8" },
  { label: "6", value: "6" },
  { label: "4", value: "4" },
  { label: "3", value: "3" },
  { label: "2", value: "2" },
  { label: "1", value: "1" },
  { label: "1/0", value: "1/0" },
  { label: "2/0", value: "2/0" },
  { label: "3/0", value: "3/0" },
  { label: "4/0", value: "4/0" },
];

export const POI_TYPE_OPTIONS = [
  { label: "PV Breaker (OCPD)", value: "PV Breaker (OCPD)" },
  { label: "Line (Supply) Side Tap", value: "Line (Supply) Side Tap" },
  { label: "Line Side Connection", value: "Line Side Connection" },
  { label: "Load Side Tap", value: "Load Side Tap" },
  { label: "Lug Kit", value: "Lug Kit" },
  { label: "Meter Collar Adapter", value: "Meter Collar Adapter" },
  { label: "Solar Ready", value: "Solar Ready" },
];

export const PCS_AMPS_OPTIONS = Array.from({ length: 38 }, (_, i) => {
  const value = 15 + i * 5;
  return { label: value.toString(), value: value.toString() };
});

export const SPB_TIE_IN_LOCATIONS = [
  { label: "Main Panel (A) Bus", value: "Main Panel (A) Bus" },
  { label: "Sub Panel (B) MCB Spot (M2)", value: "Sub Panel (B) MCB Spot (M2)" },
];

// Structural Section Constants

export const ROOFING_MATERIAL_TYPES = [
  { label: "Comp Shingle", value: "Comp Shingle" },
  { label: "S Tile", value: "S Tile" },
  { label: "F Tile", value: "F Tile" },
  { label: "W Tile", value: "W Tile" },
  { label: "Clay Tile", value: "Clay Tile" },
  { label: "Slate", value: "Slate" },
  { label: "Spanish Tile", value: "Spanish Tile" },
  { label: "Tar & Gravel", value: "Tar & Gravel" },
  { label: "Mod Bit", value: "Mod Bit" },
  { label: "Foam", value: "Foam" },
  { label: "Ground Mount", value: "Ground Mount" },
  { label: "Carport", value: "Carport" },
  { label: "Metal Corrugated", value: "Metal Corrugated" },
  { label: "Metal Seam, 12in", value: "Metal Seam, 12in" },
  { label: "Metal Seam, 16in", value: "Metal Seam, 16in" },
  { label: "Metal Seam, 18in", value: "Metal Seam, 18in" },
  { label: "Metal Seam, 24in", value: "Metal Seam, 24in" },
  { label: "Metal Shingles", value: "Metal Shingles" },
  { label: "Wood Shake", value: "Wood Shake" },
];

export const FRAMING_MEMBER_SIZES = [
  { label: "2x2", value: "2x2" },
  { label: "2x4", value: "2x4" },
  { label: "2x6", value: "2x6" },
  { label: "2x8", value: "2x8" },
  { label: "2x10", value: "2x10" },
  { label: "2x12", value: "2x12" },
  { label: "4x4", value: "4x4" },
  { label: "4x6", value: "4x6" },
  { label: "4x8", value: "4x8" },
  { label: "4x10", value: "4x10" },
  { label: "4x12", value: "4x12" },
  { label: "4x14", value: "4x14" },
  { label: "4x16", value: "4x16" },
];

export const FRAMING_MEMBER_SPACINGS = [
  { label: '12"', value: '12"' },
  { label: '16"', value: '16"' },
  { label: '24"', value: '24"' },
  { label: '32"', value: '32"' },
  { label: '48"', value: '48"' },
  { label: '64"', value: '64"' },
  { label: '72"', value: '72"' },
];

export const PITCH_OPTIONS = Array.from({ length: 51 }, (_, i) => ({
  label: `${i}`,
  value: `${i}`
}));

export const STORIES_OPTIONS = [
  { label: "1", value: "1" },
  { label: "2", value: "2" },
  { label: "3", value: "3" },
];

export const RAIL_CATALOG = [
  { make: "Dual Rack", model: "Lite" },
  { make: "EcoFasten", model: "ClickFit" },
  { make: "IronRidge", model: "XR10" },
  { make: "IronRidge", model: "XR100" },
  { make: "IronRidge", model: "XR1000" },
  { make: "K2", model: "CrossRail" },
  { make: "Mosaic", model: "QuickMount" },
  { make: "ProSolar", model: "EverRail" },
  { make: "Renusol", model: "CS60" },
  { make: "Schletter", model: "FS" },
  { make: "Snap-n-Rack", model: "Universal" },
  { make: "SolarMount", model: "SM3" },
  { make: "Unirac", model: "SolarMount" },
  { make: "ZepSolar", model: "Rail Free" },
];

export const MOUNT_CATALOG = [
  { make: "ChemLink", model: 'F1354GR 4" Round Grey' },
  { make: "Dual Rack", model: "Lite Flash L Kit" },
  { make: "EcoFasten", model: "CF Tile Hook" },
  { make: "EcoFasten", model: "CF Wood Comp Hook" },
  { make: "IronRidge", model: "BLK Comp Flashing" },
  { make: "IronRidge", model: "BLK Tile Hook" },
  { make: "IronRidge", model: "FlashFoot2" },
  { make: "IronRidge", model: "Stopper Sleeve" },
  { make: "IronRidge", model: "Tile Replacement" },
  { make: "K2", model: "Single Tile Hook" },
  { make: "K2", model: "Universal Base" },
  { make: "Quick Mount", model: "Comp Flashing" },
  { make: "Quick Mount", model: "QBase" },
  { make: "Quick Mount", model: "Tile Hook" },
  { make: "Renusol", model: "Tile Hook" },
  { make: "S-5!", model: "Clamp" },
  { make: "Schletter", model: "Rapid2+" },
  { make: "SolarMount", model: "Comp Flash" },
  { make: "Unirac", model: "Flashloc" },
  { make: "Unirac", model: "RM10" },
  { make: "Unirac", model: "Tile Hook" },
  { make: "ZepSolar", model: "Grounding Tile Hook" },
  { make: "ZepSolar", model: "Tile Replacement" },
];

// Tesla PowerWall Constants

export const TESLA_POWERWALL_GATEWAYS = [
  { label: "Backup Gateway 2", value: "Backup Gateway 2" },
  { label: "Gateway 3", value: "Gateway 3" },
  { label: "Backup Switch", value: "Backup Switch" },
];

export const POWERWALL_3_KILOWATT_OPTIONS = [
  { label: "5.8", value: "5.8" },
  { label: "7.6", value: "7.6" },
  { label: "10.0", value: "10.0" },
  { label: "11.5", value: "11.5" },
];

export const BACKUP_SWITCH_LOCATIONS = [
  { label: "Behind Utility Meter", value: "behind_utility_meter" },
  { label: "Standalone Meter Panel", value: "stand_alone_meter_panel" },
];

export const BATTERY_MOUNT_TYPES = [
  { label: "Wall Mount", value: "Wall Mount", maxQuantity: 3 },
  { label: "Ground Mount", value: "Ground Mount", maxQuantity: 4 },
];

export const EXPANSION_PACK_OPTIONS = [
  { label: "0", value: 0 },
  { label: "1", value: 1 },
  { label: "2", value: 2 },
  { label: "3", value: 3 },
];

// Time-aware greeting utility
export const getTimeBasedGreeting = (userName) => {
  const hour = new Date().getHours();

  if (hour >= 5 && hour < 12) {
    return `Good Morning, ${userName}`;
  } else if (hour >= 12 && hour < 17) {
    return `Good Afternoon, ${userName}`;
  } else if (hour >= 17 && hour < 22) {
    return `Good Evening, ${userName}`;
  } else {
    return `Good Night, ${userName}`;
  }
};

/**
 * Enphase IQ Combiner 6C Battery Compatibility
 * The 6C combiner has integrated SMS and requires specific battery configuration
 */
export const ENPHASE_6C_CONFIG = {
  // Model detection pattern
  combinerModelPattern: '6C',
  combinerMake: 'Enphase',

  // Compatible battery
  compatibleBattery: {
    make: 'Enphase',
    model: 'IQBATTERY-10C-1P-NA',
    displayName: 'IQ Battery 10C', // Shortened display name
  },

  // Quantity limits per input
  maxBatteriesPerInput: 4,
  maxTotalBatteries: 8, // 4 per input Ã— 2 inputs

  // Battery inputs enabled
  batteryInputs: ['battery1', 'battery2'],
};

/**
 * Check if combiner is Enphase 6C
 */
export const isEnphase6CCombiner = (make, model) => {
  return make?.toLowerCase() === 'enphase' && model?.includes('6C');
};

/**
 * Check if inverter is Duracell (requires dual battery inputs)
 * Duracell inverters like PD-DH3P-15K-G1 require both Battery Type 1 and Battery Type 2
 */
export const isDuracellInverter = (make, model) => {
  if (!make || !model) return false;
  const makeLower = make.toLowerCase();
  return makeLower === 'duracell' || makeLower.includes('duracell');
};

/**
 * Check if inverter is Sol-Ark (hybrid inverter with integrated storage management)
 * Sol-Ark inverters are hybrid inverters that do not require a separate Storage Management System
 */
export const isSolArkInverter = (make, model) => {
  if (!make || !model) return false;
  const makeLower = make.toLowerCase();
  return makeLower === 'sol-ark' || makeLower.includes('sol-ark') || makeLower === 'solark' || makeLower.includes('solark');
};

// ============================================
// IQ Combiner 6C Configuration Constants
// ============================================

export const IQ_COMBINER_6C_METER_COLLAR_LOCATIONS = [
  { label: "Behind Utility Meter", value: "behind_utility_meter", requiresApproval: true },
  { label: "Stand Alone Meter", value: "discrete_meter_pan", requiresApproval: false },
];

export const IQ_COMBINER_6C_BACKUP_TYPES = [
  { label: "Whole Home", value: "whole_home" },
  { label: "Partial Home", value: "partial_home" },
];

// System Configurations based on Enphase documentation
export const IQ_COMBINER_6C_CONFIGURATIONS = [
  { id: 1, name: "Solar Only (Grid-Tied)", systemType: "grid-tied", hasSolar: true, hasBattery: false, hasBackup: false, hasLegacyPV: false, requiresCTs: true },
  { id: 2, name: "Battery Only (Grid-Tied)", systemType: "grid-tied", hasSolar: false, hasBattery: true, hasBackup: false, hasLegacyPV: false, requiresCTs: true },
  { id: 3, name: "Solar + Battery (Grid-Tied)", systemType: "grid-tied", hasSolar: true, hasBattery: true, hasBackup: false, hasLegacyPV: false, requiresCTs: true },
  { id: 4, name: "Solar + Battery + Legacy PV (Grid-Tied)", systemType: "grid-tied", hasSolar: true, hasBattery: true, hasBackup: false, hasLegacyPV: true, requiresCTs: true },
  { id: 5, name: "Whole Home Backup (Behind Utility Meter)", systemType: "grid-forming", hasSolar: true, hasBattery: true, hasBackup: true, backupType: "whole_home", meterCollarLocation: "behind_utility_meter", hasLegacyPV: false, requiresCTs: false },
  { id: 6, name: "Whole Home + Legacy PV (Behind Utility Meter)", systemType: "grid-forming", hasSolar: true, hasBattery: true, hasBackup: true, backupType: "whole_home", meterCollarLocation: "behind_utility_meter", hasLegacyPV: true, requiresCTs: false, isPlanned: true },
  { id: 7, name: "Whole Home Backup (Stand Alone Meter)", systemType: "grid-forming", hasSolar: true, hasBattery: true, hasBackup: true, backupType: "whole_home", meterCollarLocation: "discrete_meter_pan", hasLegacyPV: false, requiresCTs: false },
  { id: 8, name: "Partial Home Backup (Stand Alone Meter)", systemType: "grid-forming", hasSolar: true, hasBattery: true, hasBackup: true, backupType: "partial_home", meterCollarLocation: "discrete_meter_pan", hasLegacyPV: false, requiresCTs: true, isPlanned: true, notSupported: true },
  { id: 9, name: "Partial Home + Legacy PV (Stand Alone Meter)", systemType: "grid-forming", hasSolar: true, hasBattery: true, hasBackup: true, backupType: "partial_home", meterCollarLocation: "discrete_meter_pan", hasLegacyPV: true, requiresCTs: true, isPlanned: true, notSupported: true },
  { id: 10, name: "Whole Home with Legacy Combiner", systemType: "grid-forming", hasSolar: true, hasBattery: true, hasBackup: true, backupType: "whole_home", meterCollarLocation: "behind_utility_meter", hasLegacyCombiner: true, requiresCTs: false },
];

// Valid meter collar locations per backup type
export const IQ_6C_VALID_METER_COLLAR_BY_BACKUP = {
  'Whole Home': ['behind_utility_meter', 'discrete_meter_pan'],
  'Partial Home': ['discrete_meter_pan'], // ONLY discrete meter pan - Behind Utility Meter NOT valid
  'No Backup': [], // N/A - no meter collar needed
};

// Legacy/Third-party microinverter detection
export const LEGACY_MICROINVERTER_PREFIXES = ['M', 'S']; // M-Series, S-Series are legacy Enphase
export const THIRD_PARTY_INVERTER_MAKES = ['SolarEdge', 'SMA', 'Fronius', 'Generac', 'Other'];

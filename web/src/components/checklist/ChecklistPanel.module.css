/* ===== CHECKLIST PANEL ===== */
.checklistPanel {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg-panel);
}

.checklistPanel.compact {
  font-size: 0.9em;
}

.header {
  padding: var(--spacing);
  border-bottom: 1px solid var(--border-subtle);
}

.title {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
  font-size: var(--text-lg);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  margin: 0;
}

.loadingState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing);
  padding: var(--spacing-loose);
  color: var(--text-muted);
}

.spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ===== SECTIONS ===== */
.sectionsContainer {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-tight);
}

.section {
  margin-bottom: var(--spacing-tight);
  border-radius: var(--radius-md);
  overflow: hidden;
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
}

.sectionHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: var(--spacing);
  background: var(--bg-elevated);
  border: none;
  cursor: pointer;
  transition: var(--transition-fast);
}

.sectionHeader:hover {
  background: var(--bg-hover);
}

.sectionHeader.expanded {
  border-bottom: 1px solid var(--border-subtle);
}

.sectionInfo {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
}

.sectionIcon {
  color: var(--color-primary);
}

.sectionLabel {
  font-weight: var(--font-semibold);
  color: var(--text-primary);
}

.sectionMeta {
  display: flex;
  align-items: center;
  gap: var(--spacing);
}

.progressBadge {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
  font-size: var(--text-sm);
  color: var(--text-muted);
}

.progressBar {
  width: 60px;
  height: 4px;
  background: var(--bg-page);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.progressFill {
  height: 100%;
  background: var(--color-success);
  transition: width 0.3s ease;
}

.chevron {
  color: var(--text-muted);
  transition: transform 0.2s ease;
}

.chevron.rotated {
  transform: rotate(180deg);
}

.sectionContent {
  overflow: hidden;
}

/* ===== CHECKLIST ITEMS ===== */
.checklistItem {
  border-bottom: 1px solid var(--border-subtle);
}

.checklistItem:last-child {
  border-bottom: none;
}

.checklistItem.status_complete {
  background: rgba(34, 197, 94, 0.05);
}

.checklistItem.status_revision {
  background: rgba(245, 158, 11, 0.05);
}

.itemHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing);
  cursor: pointer;
  transition: background 0.15s ease;
}

.itemHeader:hover {
  background: var(--bg-hover);
}

.itemInfo {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.itemLabel {
  font-weight: var(--font-medium);
  color: var(--text-primary);
}

.lastUpdated {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.itemControls {
  display: flex;
  align-items: center;
  gap: var(--spacing);
}

.statusToggles {
  display: flex;
  gap: var(--spacing-xs);
}

.statusBtn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) 8px;
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.statusBtn:hover {
  background: var(--bg-hover);
  border-color: var(--status-color);
  color: var(--status-color);
}

.statusBtn.active {
  color: white;
  border-color: transparent;
}

.itemChevron {
  color: var(--text-muted);
  transition: transform 0.2s ease;
}

.itemChevron.rotated {
  transform: rotate(180deg);
}

/* ===== ITEM EXPANDED CONTENT ===== */
.itemContent {
  padding: var(--spacing);
  padding-top: 0;
  background: var(--bg-page);
  border-top: 1px solid var(--border-subtle);
}

/* Sub-status section */
.subStatusSection {
  padding: var(--spacing) 0;
  border-bottom: 1px solid var(--border-subtle);
}

.subStatusLabel {
  display: block;
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  color: var(--text-muted);
  margin-bottom: var(--spacing-tight);
  text-transform: uppercase;
}

.subStatusOptions {
  display: flex;
  gap: var(--spacing-xs);
  flex-wrap: wrap;
}

.subStatusBtn {
  padding: var(--spacing-xxs) 12px;
  font-size: var(--text-sm);
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.subStatusBtn:hover {
  background: var(--bg-hover);
  border-color: var(--color-primary);
}

.subStatusBtn.active {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

/* Revision section */
.revisionSection {
  padding: var(--spacing) 0;
  border-bottom: 1px solid var(--border-subtle);
}

.revisionLabel {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--color-warning);
  margin-bottom: var(--spacing-tight);
}

.revisionTextarea {
  width: 100%;
  padding: var(--spacing-tight);
  font-size: var(--text-sm);
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  resize: vertical;
  margin-bottom: var(--spacing-tight);
}

.revisionTextarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

/* History section */
.historySection {
  padding: var(--spacing) 0;
  border-bottom: 1px solid var(--border-subtle);
}

.historySectionTitle {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-muted);
  margin: 0 0 var(--spacing-tight) 0;
}

.historyList {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-tight);
}

.historyRecord {
  padding: var(--spacing-tight);
  background: var(--bg-surface);
  border-radius: var(--radius-sm);
  border-left: 3px solid var(--border-subtle);
}

.revisionRecord {
  border-left-color: var(--color-warning);
}

.statusRecord {
  border-left-color: var(--color-success);
}

.recordHeader {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--text-xs);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-xs);
}

.recordIcon {
  color: var(--text-muted);
}

.recordUser {
  font-weight: var(--font-medium);
}

.recordAction {
  color: var(--text-secondary);
}

.recordTimestampRow {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.recordTimestamp {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.revisionText {
  font-size: var(--text-sm);
  color: var(--text-primary);
  margin: var(--spacing-xs) 0 0 0;
  white-space: pre-wrap;
}

.editBtn {
  padding: var(--spacing-xs);
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.historyRecord:hover .editBtn {
  opacity: 1;
}

.editBtn:hover {
  color: var(--color-primary);
}

.editTimestamp {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-xs);
}

.dateInput,
.timeInput {
  padding: var(--spacing-xs) 8px;
  font-size: var(--text-xs);
  background: var(--bg-page);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xs);
  color: var(--text-primary);
}

.saveBtn,
.cancelBtn {
  padding: var(--spacing-xs);
  background: transparent;
  border: none;
  cursor: pointer;
  border-radius: var(--radius-xs);
}

.saveBtn {
  color: var(--color-success);
}

.saveBtn:hover {
  background: rgba(34, 197, 94, 0.1);
}

.cancelBtn {
  color: var(--text-muted);
}

.cancelBtn:hover {
  background: var(--bg-hover);
}

/* Tasks section */
.tasksSection {
  padding: var(--spacing) 0 0 0;
}

.tasksSectionHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-tight);
}

.tasksSectionTitle {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-muted);
  margin: 0;
}

.addTaskBtn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) 8px;
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  color: var(--color-primary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.addTaskBtn:hover {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.tasksList {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.taskItem {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
  padding: var(--spacing-tight);
  background: var(--bg-surface);
  border-radius: var(--radius-sm);
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

.taskAssignee {
  margin-left: auto;
  font-size: var(--text-xs);
  color: var(--color-primary);
}

.noTasks {
  font-size: var(--text-sm);
  color: var(--text-muted);
  font-style: italic;
  margin: 0;
}

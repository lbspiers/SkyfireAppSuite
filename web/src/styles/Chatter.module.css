/* ===== CHATTER PANEL ===== */
.chatterDrawer {
  position: fixed;
  top: 0;
  right: 0;
  width: 420px;
  height: 100vh;
  background: var(--gradient-page);
  border-left: 1px solid var(--border-subtle);
  box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  transform: translateX(100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.chatterDrawerOpen {
  transform: translateX(0);
}

.chatterOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(2px);
  z-index: 999;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
}

.chatterOverlayVisible {
  opacity: 1;
  pointer-events: auto;
}

.chatterHeader {
  padding: var(--spacing) var(--spacing);
  border-bottom: 1px solid var(--border-subtle);
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(33, 52, 84, 0.5);
}

.chatterTitle {
  font-size: var(--text-lg);
  font-weight: var(--font-bold);
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: var(--spacing);
}

.chatterCloseBtn {
  width: var(--spacing-wide);
  height: var(--spacing-wide);
  border-radius: var(--spacing-tight);
  border: none;
  background: var(--bg-active);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-base);
}

.chatterCloseBtn:hover {
  background: var(--color-error-light);
  color: var(--color-error);
}

/* ===== MESSAGE LIST ===== */
.messageList {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing);
  display: flex;
  flex-direction: column;
  gap: var(--spacing);
}

.messageCard {
  background: linear-gradient(180deg, rgba(33, 52, 84, 0.6) 0%, rgba(12, 31, 63, 0.6) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: var(--spacing-tight);
  padding: var(--spacing);
  transition: var(--transition-base);
}

.messageCard:hover {
  border-color: var(--border-default);
  background: linear-gradient(180deg, rgba(33, 52, 84, 0.8) 0%, rgba(12, 31, 63, 0.8) 100%);
}

.messageHeader {
  display: flex;
  align-items: center;
  gap: var(--spacing);
  margin-bottom: var(--spacing);
}

.messageUserInfo {
  flex: 1;
  min-width: 0;
}

.messageUserName {
  font-weight: var(--font-semibold);
  font-size: 0.9rem;
  color: var(--text-primary);
  text-decoration: underline;
  text-decoration-color: var(--color-primary);
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
}

.messageTimestamp {
  font-size: var(--spacing-tight);
  color: var(--text-disabled);
}

.messageContent {
  font-size: var(--text-sm);
  line-height: 1.5;
  color: var(--text-secondary);
  white-space: pre-wrap;
  word-break: break-word;
}

.messageMention {
  background: none;
  color: var(--color-info);
  padding: 0;
  margin: 0;
  border-radius: 0;
  font-weight: var(--font-medium);
  cursor: pointer;
  transition: color 0.15s;
}

.messageMention:hover {
  background: none;
  color: var(--color-accent-blue-light);
}

.messageActions {
  display: flex;
  align-items: center;
  gap: var(--spacing);
  margin-bottom: var(--spacing);
  padding-top: var(--spacing);
  border-top: 1px solid var(--bg-hover);
}

.messageActionBtn {
  display: flex;
  align-items: center;
  gap: var(--spacing);
  padding: var(--spacing-tight) var(--spacing);
  border-radius: var(--radius-md);
  border: none;
  background: transparent;
  color: var(--text-disabled);
  font-size: var(--text-sm);
  cursor: pointer;
  transition: all 0.15s;
}

.messageActionBtn:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-muted);
}

.messageActionBtnActive {
  color: var(--color-primary);
}

.messageMenuWrapper {
  position: relative;
}

.messageMenu {
  position: absolute;
  top: 100%;
  right: 0;
  background: var(--bg-secondary-dark);
  border: 1px solid var(--border-default);
  border-radius: var(--spacing-tight);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
  min-width: 120px;
  z-index: 10;
  margin-top: var(--spacing);
  overflow: hidden;
}

.messageMenuItem {
  width: 100%;
  padding: var(--spacing) var(--spacing);
  background: transparent;
  border: none;
  color: var(--text-primary);
  text-align: left;
  cursor: pointer;
  font-size: var(--text-sm);
  transition: var(--transition-base);
}

.messageMenuItem:hover {
  background: rgba(255, 255, 255, 0.08);
}

.messageMenuItemDelete {
  color: var(--danger);
}

.messageMenuItemDelete:hover {
  background: var(--color-error-light);
}

/* ===== INPUT AREA ===== */
.chatterInputContainer {
  padding: 0;
  margin-bottom: var(--spacing);
}

.replyingTo {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing) var(--spacing);
  margin-bottom: var(--spacing);
  background: var(--color-info-light);
  border-left: 3px solid var(--color-info);
  border-radius: 0 6px 6px 0;
  font-size: var(--text-sm);
  color: var(--text-muted);
}

.replyingToCancelBtn {
  background: transparent;
  border: none;
  color: var(--text-tertiary);
  cursor: pointer;
  font-size: var(--text-base);
  padding: var(--spacing-tight) var(--spacing);
  transition: var(--transition-base);
}

.replyingToCancelBtn:hover {
  color: var(--danger);
}

.chatterInputWrapper {
  position: relative;
  background: var(--gradient-input);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--spacing-tight);
  overflow: visible;
  transition: var(--transition-colors);
}

.chatterInputWrapper:focus-within {
  border-color: var(--color-primary);
}

.chatterTextarea {
  width: 100%;
  min-height: 44px;
  max-height: 150px;
  padding: var(--spacing) var(--spacing);
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-family: inherit;
  font-size: var(--text-sm);
  line-height: 1.5;
  resize: none;
  outline: none;
}

.chatterTextarea::placeholder {
  color: var(--text-disabled);
}

.chatterInputActions {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: var(--spacing);
  padding: var(--spacing-tight) 0;
  margin-top: var(--spacing-tight);
}

.chatterInputActionsSpacer {
  flex: 1;
}

.chatterInputSendRow {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  padding: var(--spacing-tight) var(--spacing);
  margin-top: var(--spacing-xs);
}

.chatterInputTools {
  display: flex;
  gap: var(--spacing);
}

.chatterToolBtn {
  width: var(--spacing-wide);
  height: var(--spacing-wide);
  border-radius: var(--radius-md);
  border: none;
  background: transparent;
  color: var(--text-disabled);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
}

.chatterToolBtn:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-muted);
}

.chatterSendBtn {
  padding: var(--spacing-tight) var(--spacing);
  background: var(--gradient-primary);
  border: none;
  border-radius: var(--spacing-tight);
  color: white;
  font-weight: var(--font-semibold);
  font-size: var(--text-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: var(--spacing);
  transition: var(--transition-base);
}

.chatterSendBtn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(253, 115, 50, 0.4);
}

.chatterSendBtn:disabled {
  opacity: var(--opacity-disabled);
  cursor: not-allowed;
}

/* ===== MENTION DROPDOWN ===== */
.mentionDropdown {
  position: absolute;
  bottom: 100%;
  left: var(--spacing-tight);
  margin-bottom: var(--spacing);
  background: var(--gray-800);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-lg);
  box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.5);
  max-height: 220px;
  overflow-y: auto;
  min-width: 240px;
  z-index: 1001;
}

.mentionItem {
  padding: var(--spacing) var(--spacing);
  display: flex;
  align-items: center;
  gap: var(--spacing);
  cursor: pointer;
  transition: background 0.15s;
}

.mentionItem:first-child {
  border-radius: 9px 9px 0 0;
}

.mentionItem:last-child {
  border-radius: 0 0 9px 9px;
}

.mentionItem:hover,
.mentionItemActive {
  background: rgba(59, 130, 246, 0.15);
}

.mentionItemInfo {
  flex: 1;
  min-width: 0;
}

.mentionItemName {
  font-weight: var(--font-medium);
  color: var(--text-primary);
  font-size: var(--text-sm);
}

.mentionItemRole {
  font-size: var(--spacing-tight);
  color: var(--text-disabled);
}

.mentionNoResults {
  padding: 12px 16px;
  color: var(--text-secondary, #6b7280);
  font-size: 13px;
  font-style: italic;
}

/* ===== MENTION GROUPING ===== */
.mentionGroupHeader {
  padding: var(--spacing-tight) var(--spacing);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  background: rgba(0, 0, 0, 0.2);
  border-top: 1px solid var(--border-subtle);
}

.mentionGroupHeader:first-child {
  border-top: none;
}

/* ===== MENTION BADGES ===== */
.mentionBadgeSelf {
  display: inline-block;
  margin-left: var(--spacing-tight);
  padding: 2px var(--spacing-tight);
  background: rgba(253, 115, 50, 0.15);
  border: 1px solid rgba(253, 115, 50, 0.3);
  border-radius: var(--radius-pill);
  font-size: 10px;
  font-weight: var(--font-semibold);
  color: var(--color-primary);
  text-transform: none;
  letter-spacing: 0;
}

.mentionBadgeSkyfire {
  display: inline-block;
  margin-left: var(--spacing-tight);
  padding: 2px var(--spacing-tight);
  background: rgba(59, 130, 246, 0.15);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: var(--radius-pill);
  font-size: 10px;
  font-weight: var(--font-semibold);
  color: var(--color-info);
  text-transform: none;
  letter-spacing: 0;
}

/* ===== USER AVATAR ===== */
.avatar {
  border-radius: var(--radius-circle);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--font-semibold);
  color: white;
  text-transform: uppercase;
  flex-shrink: 0;
}

.avatarXs {
  width: 24px;
  height: 24px;
  font-size: 10px;
}

.avatarSm {
  width: var(--spacing-loose);
  height: var(--spacing-loose);
  font-size: var(--spacing-tight);
}

.avatarMd {
  width: 36px;
  height: 36px;
  font-size: var(--text-sm);
}

.avatarLg {
  width: 48px;
  height: 48px;
  font-size: var(--text-base);
}

/* ===== VIEW BUTTON (Dashboard - Pill Shaped Outline) ===== */
.viewButton {
  padding: var(--spacing-tight) var(--spacing);
  background: transparent;
  border: 1.5px solid var(--color-info);
  border-radius: var(--spacing);
  color: var(--color-info);
  font-size: var(--spacing-tight);
  font-weight: var(--font-semibold);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: var(--spacing);
  transition: var(--transition-base);
}

.viewButton:hover {
  background: var(--color-info-light);
  border-color: var(--color-accent-blue-light);
  color: var(--color-accent-blue-light);
  transform: translateY(-1px);
}

/* ===== PROJECT ROW HIGHLIGHTING ===== */
.projectRowHighlight {
  border: 2px solid var(--color-primary) !important;
  background: var(--color-primary-lighter) !important;
  box-shadow: 0 0 0 1px rgba(253, 115, 50, 0.2) !important;
}

/* ===== NOTIFICATION BELL ===== */
.notificationBellWrapper {
  position: relative;
}

.notificationBell {
  position: relative;
  width: 36px;
  height: 36px;
  border-radius: var(--spacing-tight);
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-base);
}

.notificationBell:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-primary);
}

.notificationBellIcon {
  font-size: var(--text-xl);
}

.notificationBadge {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  background: var(--color-error);
  border-radius: var(--radius-md);
  font-size: var(--text-xs);
  font-weight: var(--font-bold);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  border: 2px solid var(--bg-surface);
}

@keyframes notificationPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.notificationBadgePulse {
  animation: notificationPulse 1s ease-in-out infinite;
}

.notificationDropdown {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  width: 320px;
  max-height: 400px;
  background: linear-gradient(180deg, rgba(33, 52, 84, 0.98) 0%, rgba(12, 31, 63, 0.98) 100%);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--spacing-tight);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
  z-index: 1000;
  overflow: hidden;
  backdrop-filter: blur(10px);
}

.notificationDropdownHeader {
  padding: var(--spacing-tight) var(--spacing);
  border-bottom: 1px solid var(--border-subtle);
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(0, 0, 0, 0.2);
}

.notificationHeaderActions {
  display: flex;
  align-items: center;
  gap: var(--spacing);
}

.notificationDropdownTitle {
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  margin: 0;
}

.notificationDropdownClose {
  background: transparent;
  border: none;
  color: var(--text-tertiary);
  cursor: pointer;
  font-size: var(--text-xl);
  padding: var(--spacing-tight) var(--spacing);
  transition: var(--transition-base);
}

.notificationDropdownClose:hover {
  color: var(--danger);
}

.notificationDropdownContent {
  padding: var(--spacing-tight) var(--spacing);
  max-height: 340px;
  overflow-y: auto;
}

.notificationEmptyState {
  text-align: center;
  padding: var(--spacing) var(--spacing);
  color: var(--text-tertiary);
  font-size: var(--text-sm);
}

/* Notification dropdown additions */
.markAllRead {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) 8px;
  background: none;
  border: none;
  font-size: var(--text-xs);
  color: var(--color-info);
  cursor: pointer;
  transition: var(--transition-base);
}

.markAllRead:hover {
  color: var(--color-accent-blue-light);
}

.clearAllBtn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) 8px;
  background: none;
  border: none;
  font-size: var(--text-xs);
  color: var(--color-error);
  cursor: pointer;
  transition: var(--transition-base);
}

.clearAllBtn:hover {
  color: var(--color-error-light);
}

.notificationItem {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing);
  padding: var(--spacing);
  border-bottom: 1px solid var(--border-subtle);
  cursor: pointer;
  transition: background 0.15s ease;
}

.notificationItem:hover {
  background: var(--bg-hover);
}

.notificationItem.unread {
  background: rgba(253, 115, 50, 0.05);
}

.notificationItem.unread:hover {
  background: var(--bg-hover);
}

.notificationContent {
  flex: 1;
  min-width: 0;
}

.notificationMessage {
  font-size: var(--text-sm);
  color: var(--text-primary);
  margin: 0 0 var(--spacing-xs) 0;
  line-height: 1.4;
}

.notificationMeta {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  margin-bottom: var(--spacing-xs);
  font-size: var(--text-xs);
}

.notificationSender {
  color: var(--color-info);
  font-weight: var(--font-medium);
}

.notificationCompany {
  color: var(--text-muted);
}

.notificationCompany::before {
  content: '•';
  margin-right: var(--spacing-xs);
  color: var(--text-disabled);
}

.notificationProject {
  color: var(--color-primary);
  font-weight: var(--font-medium);
}

.notificationProject::before {
  content: '•';
  margin-right: var(--spacing-xs);
  color: var(--text-disabled);
}

.notificationTime {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.notificationActions {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-shrink: 0;
}

.notificationMarkRead {
  padding: var(--spacing-xs);
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all 0.15s ease;
}

.notificationMarkRead:hover {
  background: rgba(59, 130, 246, 0.15);
  color: var(--color-info);
}

.notificationClearBtn {
  padding: var(--spacing-xs);
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all 0.15s ease;
}

.notificationClearBtn:hover {
  background: rgba(239, 68, 68, 0.15);
  color: var(--color-error);
}

.notificationLoading {
  text-align: center;
  padding: var(--spacing);
  color: var(--text-muted);
  font-size: var(--text-sm);
}

/* ===== EMPTY STATE ===== */
.emptyState {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing);
  text-align: center;
}

.emptyStateIcon {
  font-size: 4rem;
  margin-bottom: var(--spacing);
  opacity: 0.3;
}

.emptyStateTitle {
  font-size: var(--text-lg);
  font-weight: var(--font-semibold);
  color: var(--text-muted);
  margin-bottom: var(--spacing);
}

.emptyStateText {
  font-size: var(--text-sm);
  color: var(--text-disabled);
}

/* Start Thread Button in Empty State */
.startThreadBtn {
  margin-top: 16px;
  padding: 12px 24px;
  background: var(--color-primary-500, #3b82f6);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.startThreadBtn:hover {
  background: var(--color-primary-600, #2563eb);
}

/* ===== LOADING SKELETON ===== */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--bg-hover) 0%,
    var(--bg-active) 50%,
    var(--bg-hover) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--spacing-tight);
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeletonMessage {
  height: 100px;
  margin-bottom: var(--spacing);
}

/* ===== INLINE PANEL (for portal view) ===== */
.chatterInline {
  height: calc(100vh - 100px);
  display: flex;
  flex-direction: column;
  background: transparent;
  border: none;
  padding: 0;
  min-height: 0;
  overflow: hidden;
}

.chatterInline .chatterHeader {
  background: transparent;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  padding: var(--spacing) var(--spacing);
}

.chatterInline .chatterTitle {
  font-size: var(--text-sm);
  color: var(--text-muted);
}

/* ===== TAB CONTENT CONTAINERS ===== */
/* Note: Tab wrapper and navigation now use shared Dashboard.module.css styles via ProjectPanelTabs component */

.notesTabContent,
.overviewTabContent,
.checklistTabContent,
.tasksTabContent {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  background: transparent;
  border: none;
  position: relative;
  min-height: 0;
  padding: var(--spacing) var(--spacing) var(--spacing) var(--spacing);
}

/* ===== THREAD CARDS ===== */
.threadList {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing);
  display: flex;
  flex-direction: column;
  gap: var(--spacing);
  position: relative;
}

/* Chat Footer */
.chatFooter {
  width: 100%;
  padding: 0;
  display: flex;
  align-items: stretch;
  justify-content: center;
  background: transparent;
  flex-shrink: 0;
}

/* Chat Footer Actions Container */
.chatFooterActions {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
  margin: var(--spacing);
}

/* Tool button in chat footer (search icon) */
.chatterToolBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: transparent;
  border: 1px solid var(--border-default);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-base);
}

.chatterToolBtn:hover {
  background: var(--bg-hover);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

/* New Thread Button in Footer */
.floatingNewThreadBtn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-tight) var(--spacing);
  background: transparent;
  border: var(--border-thin) solid var(--color-primary);
  border-radius: var(--radius-pill);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--color-primary);
  cursor: pointer;
  transition: var(--transition-base);
  white-space: nowrap;
  line-height: 1;
}

.floatingNewThreadBtn:hover {
  background: var(--color-primary);
  color: var(--text-primary);
}

.threadCard {
  background: linear-gradient(180deg, rgba(33, 52, 84, 0.4) 0%, rgba(12, 31, 63, 0.4) 100%);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: var(--spacing-tight);
  overflow: hidden;
  transition: all 0.2s;
}

.threadCard:hover {
  border-color: rgba(255, 255, 255, 0.12);
  background: linear-gradient(180deg, rgba(33, 52, 84, 0.6) 0%, rgba(12, 31, 63, 0.6) 100%);
}

.threadHeader {
  padding: var(--spacing);
  display: flex;
  align-items: flex-start;
  gap: var(--spacing);
}

.threadHeaderContent {
  flex: 1;
  min-width: 0;
}

.threadHeaderTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing);
  gap: var(--spacing);
}

.threadHeaderActions {
  display: flex;
  align-items: center;
  gap: var(--spacing);
}

.threadAuthorSection {
  display: flex;
  align-items: center;
  gap: var(--spacing);
}

.threadAuthor {
  font-weight: var(--font-semibold);
  font-size: 0.9rem;
  color: var(--text-primary);
  text-decoration: underline;
  text-decoration-color: var(--color-primary);
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
}

.threadTimestamp {
  font-size: var(--spacing-tight);
  color: var(--text-disabled);
}

.threadCollapseBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--spacing-loose);
  height: var(--spacing-loose);
  padding: 0;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--color-primary);
  cursor: pointer;
  transition: var(--transition-base);
}

.threadCollapseBtn:hover {
  background: rgba(253, 115, 50, 0.1);
  transform: scale(1.1);
}

.threadContent {
  font-size: var(--text-sm);
  line-height: 1.5;
  color: var(--text-secondary);
  white-space: pre-wrap;
  word-break: break-word;
  margin-top: var(--spacing);
}

.threadMeta {
  display: flex;
  align-items: center;
  gap: var(--spacing);
  padding: var(--spacing) var(--spacing);
  background: rgba(0, 0, 0, 0.15);
  border-top: 1px solid var(--bg-hover);
}

.threadReplyCount {
  display: flex;
  align-items: center;
  gap: var(--spacing);
  font-size: var(--text-sm);
  color: var(--text-disabled);
  padding: var(--spacing) var(--spacing);
  background: var(--bg-hover);
  border-radius: var(--spacing-tight);
}

.threadReplyCount i {
  font-size: var(--text-sm);
}

.participantAvatars {
  display: flex;
  align-items: center;
}

.participantAvatar {
  width: var(--spacing-loose);
  height: var(--spacing-loose);
  border-radius: var(--radius-circle);
  border: 2px solid var(--bg-page);
  margin-left: calc(-1 * var(--spacing-tight));
  position: relative;
  transition: transform 0.2s;
}

.participantAvatar:first-child {
  margin-left: 0;
}

.participantAvatar:hover {
  transform: scale(1.1);
  z-index: 10;
}

.threadReactionBtn {
  display: flex;
  align-items: center;
  gap: var(--spacing);
  padding: var(--spacing-tight) var(--spacing);
  border-radius: var(--spacing-tight);
  border: none;
  background: var(--bg-hover);
  color: var(--text-disabled);
  font-size: var(--text-sm);
  cursor: pointer;
  transition: all 0.15s;
}

.threadReactionBtn:hover {
  background: var(--bg-active);
  color: var(--text-muted);
}

.threadReactionBtnActive {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border: 1px solid rgba(253, 115, 50, 0.3);
}

/* ===== THREAD REPLIES ===== */
.repliesContainer {
  border-top: 1px solid var(--bg-hover);
  background: rgba(0, 0, 0, 0.1);
}

.replyItem {
  padding: var(--spacing) var(--spacing);
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
  display: flex;
  align-items: flex-start;
  gap: var(--spacing);
}

.replyItem:last-child {
  border-bottom: none;
}

.replyContent {
  flex: 1;
  min-width: 0;
}

.replyHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing);
}

.replyAuthor {
  font-weight: var(--font-semibold);
  font-size: var(--text-sm);
  color: var(--text-primary);
  text-decoration: underline;
  text-decoration-color: var(--color-primary);
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
}

.replyTimestamp {
  font-size: 0.6875rem;
  color: var(--text-disabled);
}

.replyText {
  font-size: var(--text-sm);
  line-height: 1.5;
  color: var(--text-secondary);
  white-space: pre-wrap;
  word-break: break-word;
}

/* ===== THREAD FOOTER (Inline Reply Input) ===== */
.threadFooter {
  padding: 0;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
  background: transparent;
}

.inlineReplyInput {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing);
}

.inlineReplyTextarea {
  flex: 1;
  min-height: 36px;
  max-height: 120px;
  padding: var(--spacing) var(--spacing);
  background: var(--bg-hover);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: var(--spacing-tight);
  color: var(--text-primary);
  font-family: inherit;
  font-size: var(--text-sm);
  line-height: 1.5;
  resize: none;
  outline: none;
  transition: var(--transition-base);
}

.inlineReplyTextarea:focus {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--color-primary);
}

.inlineReplyTextarea::placeholder {
  color: var(--text-disabled);
}

.inlineReplySendBtn {
  padding: var(--spacing-tight) var(--spacing);
  background: var(--gradient-primary);
  border: none;
  border-radius: var(--spacing-tight);
  color: white;
  font-weight: var(--font-semibold);
  font-size: var(--spacing-tight);
  cursor: pointer;
  transition: var(--transition-base);
  flex-shrink: 0;
}

.inlineReplySendBtn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(253, 115, 50, 0.4);
}

.inlineReplySendBtn:disabled {
  opacity: var(--opacity-disabled);
  cursor: not-allowed;
}

/* ===== START NEW THREAD (Collapsed Button) ===== */
.newThreadContainer {
  width: 100%;
  background: transparent;
}

.newThreadHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary);
}

.startThreadBtn {
  width: 100%;
  padding: var(--spacing-tight) var(--spacing);
  background: var(--gradient-input);
  border: 1.5px solid var(--border-elevated);
  border-radius: var(--spacing);
  color: var(--text-muted);
  font-weight: var(--font-semibold);
  font-size: var(--text-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing);
  transition: var(--transition-base);
}

.startThreadBtn:hover {
  background: var(--gradient-tab-hover);
  border-color: rgba(255, 255, 255, 0.3);
  color: var(--text-primary);
  transform: translateY(-1px);
}

.startThreadBtn i {
  font-size: var(--text-base);
}

.newThreadInput {
  margin-bottom: var(--spacing);
  padding: var(--spacing-tight) var(--spacing);
  background: linear-gradient(180deg, rgba(33, 52, 84, 0.4) 0%, rgba(12, 31, 63, 0.4) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: var(--radius-lg);
  min-height: 36px;
}

.newThreadTextarea {
  width: 100%;
  min-height: 80px;
  max-height: 150px;
  padding: var(--spacing);
  background: var(--bg-hover);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: var(--spacing-tight);
  color: var(--text-primary);
  font-family: inherit;
  font-size: var(--text-sm);
  line-height: 1.5;
  resize: none;
  outline: none;
  transition: var(--transition-base);
  margin-bottom: var(--spacing);
}

.newThreadTextarea:focus {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--color-primary);
}

.newThreadTextarea::placeholder {
  color: var(--text-disabled);
}

.newThreadActions {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing);
}

.newThreadCancelBtn {
  background: transparent;
  border: none;
  font-size: 18px;
  color: var(--text-secondary, #6b7280);
  cursor: pointer;
  padding: 4px 8px;
  transition: var(--transition-base);
}

.newThreadCancelBtn:hover {
  color: var(--text-primary);
}

.newThreadPostBtn {
  padding: var(--spacing-tight) var(--spacing);
  background: var(--gradient-primary);
  border: none;
  border-radius: var(--spacing-tight);
  color: white;
  font-weight: var(--font-semibold);
  font-size: var(--text-sm);
  cursor: pointer;
  transition: var(--transition-base);
}

.newThreadPostBtn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(253, 115, 50, 0.4);
}

.newThreadPostBtn:disabled {
  opacity: var(--opacity-disabled);
  cursor: not-allowed;
}

/* ===== SCROLLBAR ===== */
.messageList::-webkit-scrollbar,
.threadList::-webkit-scrollbar {
  width: var(--spacing-tight);
}

.messageList::-webkit-scrollbar-track,
.threadList::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
  border-radius: var(--spacing-xs);
}

.messageList::-webkit-scrollbar-thumb,
.threadList::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: var(--spacing-xs);
}

.messageList::-webkit-scrollbar-thumb:hover,
.threadList::-webkit-scrollbar-thumb:hover {
  background: rgba(253, 115, 50, 0.7);
}

.messageList::-webkit-scrollbar-button,
.threadList::-webkit-scrollbar-button {
  display: none;
  width: 0;
  height: 0;
}

.mentionDropdown::-webkit-scrollbar {
  width: 6px;
}

.mentionDropdown::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
  border-radius: var(--radius-sm);
}

.mentionDropdown::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: var(--radius-sm);
}

.mentionDropdown::-webkit-scrollbar-thumb:hover {
  background: rgba(253, 115, 50, 0.7);
}

/* ===== FILE ATTACHMENTS ===== */
.attachmentChips {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) 0;
  margin-bottom: var(--spacing-xs);
}

.attachmentChip {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-tight);
  background: rgba(59, 130, 246, 0.15);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: var(--radius-md);
  font-size: var(--text-xs);
  color: var(--color-info);
  max-width: 300px;
}

.attachmentChipName {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.attachmentChipSize {
  color: var(--text-muted);
  font-size: var(--text-xs);
}

.attachmentChipRemove {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2px;
  background: none;
  border: none;
  color: var(--color-error);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: background 0.15s ease;
}

.attachmentChipRemove:hover {
  background: rgba(239, 68, 68, 0.2);
}

/* Attachments in messages */
.messageAttachments {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  margin-top: var(--spacing);
}

.messageAttachment {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing);
  padding: var(--spacing-tight) var(--spacing);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  transition: all 0.15s ease;
  max-width: 450px;
}

.messageAttachment:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--color-primary);
}

.attachmentInfo {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
  flex: 1;
  min-width: 0;
  color: var(--color-primary);
}

.attachmentDetails {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
  min-width: 0;
}

.messageAttachmentName {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-weight: var(--font-medium);
  color: var(--text-primary);
}

.messageAttachmentSize {
  color: var(--text-muted);
  font-size: var(--text-xs);
}

.attachmentActions {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-shrink: 0;
}

.attachmentActionBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: rgba(255, 255, 255, 0.08);
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-base);
  text-decoration: none;
}

.attachmentActionBtn:hover {
  background: var(--color-primary);
  color: var(--text-primary);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .chatterDrawer {
    width: 100%;
    max-width: 100%;
  }

  .attachmentChip {
    max-width: 100%;
  }

  .messageAttachment {
    max-width: 100%;
  }
}

/* ========================================
   REPLY ATTACHMENTS
   ======================================== */

.replyAttachments {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-tight);
}

.replyAttachment {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing);
  padding: var(--spacing-xs) var(--spacing-tight);
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  transition: all 0.15s ease;
  max-width: 380px;
}

.replyAttachment:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: var(--color-primary);
}

.replyAttachmentName {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-primary);
  font-weight: var(--font-medium);
}

.replyAttachmentSize {
  color: var(--text-muted);
  font-size: var(--text-xs);
}

@media (max-width: 768px) {
  .replyAttachment {
    max-width: 100%;
  }
}

/* ============================================
   EDIT MODE STYLES
   ============================================ */

.editMode {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-tight);
  margin-top: var(--spacing-xs);
}

.editTextarea {
  width: 100%;
  min-height: 80px;
  padding: var(--spacing);
  background: var(--bg-input);
  border: var(--border-thin) solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-family: inherit;
  font-size: var(--text-sm);
  line-height: 1.5;
  resize: vertical;
  transition: var(--transition-base);
}

.editTextarea:focus {
  outline: none;
  border-color: var(--color-primary);
  background: var(--bg-input-hover);
}

.editTextarea:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.editFooter {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--spacing);
}

.editCharCount {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-variant-numeric: tabular-nums;
}

.editCharCountError {
  color: var(--color-error);
  font-weight: var(--font-semibold);
}

.editActions {
  display: flex;
  gap: var(--spacing-tight);
}

.editedIndicator {
  color: var(--text-muted);
  font-size: var(--text-xs);
  font-style: italic;
  margin-left: var(--spacing-xs);
}

/* Edit mode in replies */
.replyText .editMode {
  margin-top: 0;
}

.replyText .editTextarea {
  min-height: 60px;
}

/* Edit mode in thread content */
.threadContent .editMode {
  margin-top: var(--spacing-tight);
}

.threadContent .editTextarea {
  min-height: 100px;
}

/* ============================================
   EMOJI REACTIONS
   ============================================ */

/* Reactions display (bubbles showing existing reactions) */
.reactionsDisplay {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-tight);
}

.reactionBubble {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-tight);
  background: var(--bg-input);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-pill);
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: var(--text-sm);
}

.reactionBubble:hover {
  background: var(--bg-hover);
  border-color: var(--border-hover);
  transform: scale(1.05);
}

.reactionBubbleActive {
  background: var(--color-primary-subtle);
  border-color: var(--color-primary);
}

.reactionBubbleActive:hover {
  background: var(--color-primary-subtle);
  border-color: var(--color-primary);
}

.reactionEmoji {
  font-size: var(--text-base);
  line-height: 1;
}

.reactionCount {
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  color: var(--text-muted);
  min-width: 12px;
  text-align: center;
}

.reactionBubbleActive .reactionCount {
  color: var(--color-primary);
}

/* Thread reactions section - contains both quick reactions and display */
.threadReactionsSection {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-tight);
  margin-top: var(--spacing);
  padding-top: var(--spacing-tight);
  border-top: 1px solid rgba(255, 255, 255, 0.05);
}

/* ============================================
   SEEN BY / READ RECEIPTS
   ============================================ */

.seenByIndicator {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  font-size: 12px;
  cursor: default;
  position: relative;
  transition: color 0.2s ease, background-color 0.2s ease;
}

.seenByIndicator:hover {
  color: var(--text-secondary);
  background-color: var(--bg-hover);
}

.seenByIcon {
  opacity: 0.7;
}

.seenByCount {
  font-weight: 500;
}

.seenByTooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-bottom: 8px;
  background: var(--bg-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  min-width: 200px;
  max-width: 280px;
  z-index: 1000;
  overflow: hidden;
}

.seenByTooltipHeader {
  padding: 10px 12px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  background: var(--bg-input);
  border-bottom: 1px solid var(--border-default);
}

.seenByList {
  max-height: 240px;
  overflow-y: auto;
}

.seenByViewer {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.seenByViewer:last-child {
  border-bottom: none;
}

.seenByViewerInfo {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
  min-width: 0;
}

.seenByViewerName {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.seenByViewerTime {
  font-size: 11px;
  color: var(--text-muted);
}

.seenByLoading,
.seenByEmpty {
  padding: 16px 12px;
  text-align: center;
  font-size: 12px;
  color: var(--text-muted);
}

.seenByMore {
  padding: 8px 12px;
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-input);
}

/* ============================================
   CHATTER SEARCH
   ============================================ */

.chatterSearch {
  position: relative;
  margin-bottom: var(--spacing);
}

.searchInputWrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-input);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.searchInputWrapper:focus-within {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px rgba(253, 115, 50, 0.1);
}

.searchIcon {
  color: var(--text-muted);
  flex-shrink: 0;
}

.searchInput {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  font-size: 14px;
  color: var(--text-primary);
}

.searchInput::placeholder {
  color: var(--text-muted);
}

.searchClearBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: color 0.2s ease, background-color 0.2s ease;
}

.searchClearBtn:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.searchSpinner {
  width: 16px;
  height: 16px;
  border: 2px solid var(--border-default);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.searchResults {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  margin-top: 4px;
  background: var(--bg-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 100;
  max-height: 400px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.searchResultsHeader {
  padding: 10px 12px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  background: var(--bg-input);
  border-bottom: 1px solid var(--border-default);
}

.searchResultsList {
  flex: 1;
  overflow-y: auto;
}

.searchResultItem {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.searchResultItem:hover {
  background: var(--bg-hover);
}

.searchResultItem:last-child {
  border-bottom: none;
}

.searchResultIcon {
  flex-shrink: 0;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-input);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
}

.searchResultContent {
  flex: 1;
  min-width: 0;
}

.searchResultMeta {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.searchResultAuthor {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.searchResultTime {
  font-size: 11px;
  color: var(--text-muted);
}

.searchResultBadge {
  font-size: 10px;
  padding: 2px 6px;
  background: var(--color-info);
  color: white;
  border-radius: var(--radius-pill);
  text-transform: uppercase;
  font-weight: 600;
}

.searchResultHighlight {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.searchResultHighlight mark {
  background: rgba(253, 115, 50, 0.3);
  color: var(--color-primary);
  padding: 0 2px;
  border-radius: 2px;
}

.searchResultArrow {
  flex-shrink: 0;
  color: var(--text-muted);
  opacity: 0;
  transition: opacity 0.15s ease;
}

.searchResultItem:hover .searchResultArrow {
  opacity: 1;
}

.searchNoResults {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 32px 16px;
  color: var(--text-muted);
  font-size: 13px;
}

/* Thread highlight animation when navigating from search */
.highlightThread {
  animation: highlightPulse 2s ease-out;
}

@keyframes highlightPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(253, 115, 50, 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(253, 115, 50, 0.1);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(253, 115, 50, 0);
  }
}

/* ============================================
   FILES TAB
   ============================================ */

.filesTab {
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* Header */
.filesHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing) var(--spacing);
  border-bottom: 1px solid var(--border-default);
  background: var(--bg-panel);
}

.filesHeaderLeft {
  display: flex;
  align-items: center;
  gap: var(--spacing);
}

.filesTitle {
  font-size: var(--text-lg);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  margin: 0;
}

.filesCount {
  font-size: var(--text-sm);
  color: var(--text-muted);
  padding: 2px 8px;
  background: var(--bg-input);
  border-radius: var(--radius-pill);
}

.filesHeaderRight {
  display: flex;
  align-items: center;
  gap: var(--spacing);
}

.filesFilter {
  padding: 6px 10px;
  background: var(--bg-input);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--text-sm);
  cursor: pointer;
  transition: border-color 0.2s ease;
}

.filesFilter:hover {
  border-color: var(--border-hover);
}

.filesFilter:focus {
  outline: none;
  border-color: var(--color-primary);
}

.filesViewToggle {
  display: flex;
  gap: 4px;
  background: var(--bg-input);
  padding: 4px;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-default);
}

.filesViewBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.filesViewBtn:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.filesViewBtnActive {
  color: var(--color-primary);
  background: var(--color-primary-subtle);
}

/* Loading state */
.filesLoading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing);
  padding: var(--spacing-loose);
  color: var(--text-muted);
  font-size: var(--text-sm);
}

.filesLoadingSpinner {
  animation: spin 0.8s linear infinite;
}

/* Empty state */
.filesEmpty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing);
  padding: var(--spacing-loose);
  color: var(--text-muted);
  text-align: center;
}

.filesEmptyBtn {
  padding: var(--spacing-tight) var(--spacing);
  background: var(--gradient-primary);
  border: none;
  border-radius: var(--radius-md);
  color: white;
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  cursor: pointer;
  transition: var(--transition-base);
}

.filesEmptyBtn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(253, 115, 50, 0.4);
}

/* Grid view */
.filesGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: var(--spacing);
  padding: var(--spacing);
  overflow-y: auto;
  flex: 1;
}

.fileCard {
  display: flex;
  flex-direction: column;
  background: var(--bg-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: all 0.2s ease;
  cursor: pointer;
}

.fileCard:hover {
  border-color: var(--border-hover);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.fileCardPreview {
  width: 100%;
  height: 140px;
  background: var(--bg-input);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  position: relative;
}

.fileCardImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.fileCardIcon {
  color: var(--text-muted);
}

.fileCardInfo {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  padding: var(--spacing);
}

.fileCardName {
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.fileCardMeta {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.fileCardMetaText {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fileCardFooter {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding-top: var(--spacing-xs);
  border-top: 1px solid var(--border-default);
}

.fileCardSize {
  font-size: var(--text-xs);
  color: var(--text-muted);
  flex: 1;
}

.fileCardThreadBtn,
.fileCardDownloadBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: var(--bg-input);
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.fileCardThreadBtn:hover {
  background: var(--color-info);
  color: white;
}

.fileCardDownloadBtn:hover {
  background: var(--color-primary);
  color: white;
}

/* List view */
.filesList {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  padding: var(--spacing);
  overflow-y: auto;
  flex: 1;
}

.fileRow {
  display: flex;
  align-items: center;
  gap: var(--spacing);
  padding: var(--spacing);
  background: var(--bg-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  transition: all 0.2s ease;
  cursor: pointer;
}

.fileRow:hover {
  border-color: var(--border-hover);
  background: var(--bg-hover);
}

.fileRowPreview {
  width: 48px;
  height: 48px;
  background: var(--bg-input);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  flex-shrink: 0;
}

.fileRowImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.fileRowIcon {
  color: var(--text-muted);
}

.fileRowInfo {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
  min-width: 0;
}

.fileRowName {
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.fileRowMeta {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.fileRowMetaText {
  white-space: nowrap;
}

.fileRowActions {
  display: flex;
  gap: var(--spacing-xs);
  flex-shrink: 0;
}

.fileRowActionBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: var(--bg-input);
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.fileRowActionBtn:hover {
  background: var(--color-primary);
  color: white;
}

/* Load more */
.filesLoadMore {
  display: flex;
  justify-content: center;
  padding: var(--spacing);
  border-top: 1px solid var(--border-default);
}

.filesLoadMoreBtn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-tight) var(--spacing);
  background: var(--bg-input);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  cursor: pointer;
  transition: all 0.2s ease;
}

.filesLoadMoreBtn:hover:not(:disabled) {
  background: var(--bg-hover);
  border-color: var(--border-hover);
}

.filesLoadMoreBtn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Attachment viewer modal */
.attachmentViewerOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing);
}

.attachmentViewerContent {
  display: flex;
  flex-direction: column;
  max-width: 90vw;
  max-height: 90vh;
  background: var(--bg-panel);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-xl);
}

.attachmentViewerHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing);
  border-bottom: 1px solid var(--border-default);
  background: var(--bg-input);
}

.attachmentViewerTitle {
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.attachmentViewerClose {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  font-size: 24px;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.attachmentViewerClose:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.attachmentViewerBody {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing);
  background: rgba(0, 0, 0, 0.4);
  flex: 1;
  overflow: auto;
}

.attachmentViewerImage {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.attachmentViewerFooter {
  display: flex;
  justify-content: center;
  gap: var(--spacing);
  padding: var(--spacing);
  border-top: 1px solid var(--border-default);
  background: var(--bg-input);
}

.attachmentViewerBtn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-tight) var(--spacing);
  background: var(--gradient-primary);
  border: none;
  border-radius: var(--radius-md);
  color: white;
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  cursor: pointer;
  transition: var(--transition-base);
}

.attachmentViewerBtn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(253, 115, 50, 0.4);
}

/* Responsive */
@media (max-width: 768px) {
  .filesGrid {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  }

  .fileCardPreview {
    height: 120px;
  }

  .attachmentViewerContent {
    max-width: 95vw;
    max-height: 95vh;
  }
}

/* ============================================
   ACTIVITY LOG TAB
   ============================================ */

.activityTab {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.activityHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing) var(--spacing);
  border-bottom: 1px solid var(--border-default);
  background: var(--bg-panel);
}

.activityTitle {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-secondary);
}

.activityControls {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
}

.filterBtn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: 6px 10px;
  background: var(--bg-input);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--text-sm);
  cursor: pointer;
  transition: all 0.2s ease;
}

.filterBtn:hover {
  border-color: var(--border-hover);
  background: var(--bg-hover);
}

.filterMenu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  background: var(--bg-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  min-width: 180px;
  z-index: 100;
  overflow: hidden;
}

.filterMenuItem {
  display: block;
  width: 100%;
  padding: 10px 12px;
  background: transparent;
  border: none;
  text-align: left;
  font-size: var(--text-sm);
  color: var(--text-primary);
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.filterMenuItem:hover {
  background: var(--bg-hover);
}

.filterMenuItemActive {
  background: var(--color-primary-subtle);
  color: var(--color-primary);
  font-weight: var(--font-medium);
}

/* Loading and empty states */
.activityLoading,
.activityEmpty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing);
  padding: var(--spacing-loose);
  color: var(--text-muted);
  text-align: center;
}

.activityLoadingSpinner {
  animation: spin 0.8s linear infinite;
}

.activityEmpty p {
  font-size: var(--text-sm);
  margin: 0;
  margin-top: var(--spacing-xs);
}

/* Timeline */
.activityTimeline {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing);
}

.activityGroup {
  margin-bottom: var(--spacing-loose);
}

.activityGroup:last-child {
  margin-bottom: 0;
}

.activityDateHeader {
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: var(--spacing);
  padding-left: 36px;
}

.activityList {
  display: flex;
  flex-direction: column;
}

.activityItem {
  display: flex;
  gap: var(--spacing);
  position: relative;
}

.activityConnector {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 24px;
  flex-shrink: 0;
}

.activityIcon {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  z-index: 1;
}

.activityLine {
  width: 2px;
  flex: 1;
  background: var(--border-default);
  margin: 4px 0;
  min-height: 20px;
}

.activityContent {
  flex: 1;
  padding-bottom: var(--spacing);
  min-width: 0;
}

.activityMain {
  margin-bottom: 4px;
}

.activityDescription {
  font-size: var(--text-sm);
  color: var(--text-primary);
  line-height: 1.4;
}

.activityChange {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  background: var(--bg-input);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  margin-top: 6px;
  margin-bottom: 6px;
}

.activityOldValue {
  color: var(--text-muted);
  text-decoration: line-through;
}

.activityNewValue {
  color: var(--color-primary);
  font-weight: var(--font-medium);
}

.activityMeta {
  display: flex;
  align-items: center;
  gap: var(--spacing-tight);
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.activityUser {
  font-weight: var(--font-medium);
  color: var(--text-secondary);
}

.activityTime {
  cursor: default;
}

.activityLoadMore {
  padding: var(--spacing);
  text-align: center;
}

.activityLoadMoreBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-tight) var(--spacing);
  background: var(--bg-input);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  cursor: pointer;
  transition: all 0.2s ease;
  margin: 0 auto;
}

.activityLoadMoreBtn:hover:not(:disabled) {
  background: var(--bg-hover);
  border-color: var(--border-hover);
}

.activityLoadMoreBtn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Responsive */
@media (max-width: 768px) {
  .activityDateHeader {
    padding-left: 28px;
  }

  .activityConnector {
    width: 20px;
  }

  .activityIcon {
    width: 20px;
    height: 20px;
  }
}

/* ============================================
   RICH TEXT EDITOR
   ============================================ */

.richTextEditor {
  display: flex;
  flex-direction: column;
  background: var(--gradient-input);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--spacing-tight);
  overflow: hidden;
  transition: var(--transition-colors);
}

.richTextEditor:focus-within {
  border-color: var(--color-primary);
}

/* Toolbar */
.editorToolbar {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-tight) var(--spacing);
  background: var(--scrollbar-track);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  flex-wrap: wrap;
}

.toolbarGroup {
  display: flex;
  align-items: center;
  gap: 2px;
}

.toolbarButton {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
}

.toolbarButton:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-primary);
}

.toolbarButton:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.toolbarButtonActive {
  background: var(--color-primary);
  color: white;
}

.toolbarDivider {
  width: 1px;
  height: 20px;
  background: rgba(255, 255, 255, 0.1);
}

.toolbarSpacer {
  flex: 1;
}

.charCount {
  font-size: var(--text-xs);
  color: var(--text-muted);
  padding: 0 var(--spacing-tight);
  font-variant-numeric: tabular-nums;
}

.charCountOver {
  color: var(--color-error);
  font-weight: var(--font-semibold);
}

/* Editor Content */
.editorContent {
  width: 100%;
  min-height: 44px;
  max-height: 150px;
  overflow-y: auto;
  color: var(--text-primary);
  font-family: inherit;
  font-size: var(--text-sm);
  line-height: 1.5;
}

.editorContent :global(.ProseMirror) {
  padding: var(--spacing) var(--spacing);
  outline: none;
}

.editorContent :global(.ProseMirror p.is-editor-empty:first-child::before) {
  content: attr(data-placeholder);
  color: var(--text-disabled);
  pointer-events: none;
  float: left;
  height: 0;
}

/* Rich text formatting */
.editorContent :global(.ProseMirror) strong {
  font-weight: var(--font-bold);
}

.editorContent :global(.ProseMirror) em {
  font-style: italic;
}

.editorContent :global(.ProseMirror) s {
  text-decoration: line-through;
}

.editorContent :global(.ProseMirror) code {
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-sm);
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
  color: var(--color-accent-blue-light);
}

.editorContent :global(.ProseMirror) ul,
.editorContent :global(.ProseMirror) ol {
  padding-left: 24px;
  margin: var(--spacing-xs) 0;
}

.editorContent :global(.ProseMirror) li {
  margin: 2px 0;
}

.editorContent :global(.ProseMirror) blockquote {
  margin: var(--spacing-xs) 0;
  padding-left: var(--spacing);
  border-left: 3px solid var(--color-primary);
  color: var(--text-secondary);
  font-style: italic;
}

.editorLink {
  color: var(--color-info);
  text-decoration: underline;
  cursor: pointer;
  transition: color 0.15s ease;
}

.editorLink:hover {
  color: var(--color-accent-blue-light);
}

.editorMention {
  color: var(--color-info);
  background: rgba(59, 130, 246, 0.15);
  border-radius: var(--radius-sm);
  padding: 2px 6px;
  font-weight: var(--font-medium);
  cursor: pointer;
  transition: background 0.15s ease;
}

.editorMention:hover {
  background: rgba(59, 130, 246, 0.25);
}

.editorCodeBlock {
  margin: var(--spacing) 0;
  padding: var(--spacing);
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-md);
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
  color: var(--text-primary);
  overflow-x: auto;
}

.editorCodeBlock :global(pre) {
  margin: 0;
  padding: 0;
  background: none;
}

/* Bubble Menu */
.bubbleMenu {
  display: flex;
  gap: 2px;
  padding: 4px;
  background: var(--bg-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
}

.bubbleButton {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
}

.bubbleButton:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-primary);
}

.bubbleButtonActive {
  background: var(--color-primary);
  color: white;
}

/* Mention List */
.mentionList {
  position: fixed;
  background: var(--bg-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  min-width: 240px;
  max-height: 280px;
  overflow-y: auto;
  z-index: 1000;
}

.mentionItem {
  width: 100%;
  padding: var(--spacing-tight) var(--spacing);
  background: transparent;
  border: none;
  text-align: left;
  font-size: var(--text-sm);
  color: var(--text-primary);
  cursor: pointer;
  transition: background 0.15s ease;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.mentionItem:hover {
  background: var(--bg-hover);
}

.mentionItem:focus {
  outline: none;
  background: var(--bg-hover);
}

/* Scrollbar for mention list */
.mentionList::-webkit-scrollbar {
  width: 6px;
}

.mentionList::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
  border-radius: var(--radius-sm);
}

.mentionList::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: var(--radius-sm);
}

.mentionList::-webkit-scrollbar-thumb:hover {
  background: rgba(253, 115, 50, 0.7);
}

/* Scrollbar for editor content */
.editorContent::-webkit-scrollbar {
  width: 6px;
}

.editorContent::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
  border-radius: var(--radius-sm);
}

.editorContent::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: var(--radius-sm);
}

.editorContent::-webkit-scrollbar-thumb:hover {
  background: rgba(253, 115, 50, 0.7);
}
